# Thread Safe Queue

Пул потоков на базе потокобезопасной очереди.

### Структура проекта
1. Класс потокобезопасной очереди, хранящей функции, предназначенные для исполнения.
2. Кдасс, содержащий пул потоков, основанный на этой очереди. 
3. Пул состоит из фиксированного числа рабочих потоков, равного количеству аппаратных ядер.
4. Когда у программы появляется какая-то работа, она вызывает функцию, которая помещает эту работу в очередь.
5. Рабочий поток забирает работу из очереди, выполняет указанную в ней задачу, после чего проверяет, есть ли в очереди другие работы.

### Реализация

#### 1. Класс thread_pool — реализация пула потоков.
Поля класса thread_pool:
* вектор потоков, которые инициализируются в конструкторе класса и уничтожаются в деструкторе;
* потокобезопасная очередь задач для хранения очереди работ.

Методы класса thread_pool:
* метод work — выбирает из очереди очередную задачу и исполняет её. Этот метод передаётся конструктору потоков для исполнения;
* метод submit — помещает в очередь задачу. В качестве аргумента метод принимает объект шаблона std::function.

#### 2. Шаблонный класс safe_queue — реализация очереди, безопасной относительно одновременного доступа из нескольких потоков.
Поля класса safe_queue:
* очередь std::queue для хранения задач,
* std::mutex для реализации блокировки,
* std::condtional_variables для уведомлений.

Методы класса safe_queue:
* метод push — записывает в начало очереди новую задачу. При этом захватывает мьютекс, а после окончания операции нотифицируется условная переменная;
* метод pop — находится в ожидании, пока не придёт уведомление на условную переменную. При нотификации условной переменной данные считываются из очереди.